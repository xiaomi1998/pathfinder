<!DOCTYPE html>
<html>
<head>
    <title>FunnelBuilder ç»„ä»¶æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px;
        }
        .success { background: #d1f2eb; border: 1px solid #27ae60; }
        .error { background: #fadbd8; border: 1px solid #e74c3c; }
        .info { background: #d6eaf8; border: 1px solid #3498db; }
    </style>
</head>
<body>
    <h1>FunnelBuilder ç»„ä»¶åŠ è½½æµ‹è¯•</h1>
    
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            results.appendChild(div);
        }
        
        async function testFunnelBuilder() {
            addResult('ğŸš€ å¼€å§‹æµ‹è¯• FunnelBuilder ç»„ä»¶åŠ è½½...');
            
            try {
                // æµ‹è¯•å‰ç«¯æœåŠ¡å™¨å“åº”
                addResult('ğŸ”„ æµ‹è¯•å‰ç«¯æœåŠ¡å™¨...');
                const frontendResponse = await fetch('http://localhost:3000/');
                if (frontendResponse.ok) {
                    addResult('âœ… å‰ç«¯æœåŠ¡å™¨è¿è¡Œæ­£å¸¸', 'success');
                } else {
                    addResult(`âŒ å‰ç«¯æœåŠ¡å™¨å“åº”å¼‚å¸¸: ${frontendResponse.status}`, 'error');
                    return;
                }
                
                // æµ‹è¯•åç«¯API
                addResult('ğŸ”„ æµ‹è¯•åç«¯API...');
                const backendResponse = await fetch('http://localhost:8080/health');
                if (backendResponse.ok) {
                    const data = await backendResponse.json();
                    addResult(`âœ… åç«¯APIè¿è¡Œæ­£å¸¸: ${data.message}`, 'success');
                } else {
                    addResult(`âŒ åç«¯APIå“åº”å¼‚å¸¸: ${backendResponse.status}`, 'error');
                }
                
                // æµ‹è¯•ç›´æ¥è®¿é—®FunnelBuilderé¡µé¢
                addResult('ğŸ”„ æµ‹è¯• FunnelBuilder é¡µé¢è®¿é—®...');
                try {
                    // é¦–å…ˆæµ‹è¯•æ˜¯å¦éœ€è¦è®¤è¯
                    const funnelResponse = await fetch('http://localhost:3000/funnels/create', {
                        method: 'GET',
                        mode: 'no-cors'
                    });
                    addResult('ğŸ“‹ FunnelBuilder é¡µé¢è¯·æ±‚å·²å‘é€', 'info');
                    
                    // å°è¯•é€šè¿‡å¯¼èˆªæµ‹è¯•
                    addResult('ğŸ”„ å‡†å¤‡å¯¼èˆªæµ‹è¯• - ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•');
                    
                    // åˆ›å»ºå¯¼èˆªæŒ‰é’®
                    const navButton = document.createElement('button');
                    navButton.innerHTML = 'ğŸ”— å¯¼èˆªåˆ° FunnelBuilder é¡µé¢';
                    navButton.style.cssText = 'padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 10px 0;';
                    navButton.onclick = function() {
                        addResult('ğŸ”„ å°è¯•å¯¼èˆªåˆ° FunnelBuilder...');
                        window.open('http://localhost:3000/funnels/create', '_blank');
                    };
                    results.appendChild(navButton);
                    
                    // åˆ›å»ºç™»å½•æµ‹è¯•æŒ‰é’®
                    const loginButton = document.createElement('button');
                    loginButton.innerHTML = 'ğŸ” å…ˆç™»å½•å†æµ‹è¯•';
                    loginButton.style.cssText = 'padding: 10px 20px; background: #27ae60; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 10px;';
                    loginButton.onclick = function() {
                        addResult('ğŸ”„ å¯¼èˆªåˆ°ç™»å½•é¡µé¢...');
                        window.open('http://localhost:3000/login', '_blank');
                    };
                    results.appendChild(loginButton);
                    
                } catch (navError) {
                    addResult(`âŒ FunnelBuilder é¡µé¢å¯¼èˆªå¤±è´¥: ${navError.message}`, 'error');
                }
                
            } catch (error) {
                addResult(`âŒ æµ‹è¯•è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: ${error.message}`, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨å¼€å§‹æµ‹è¯•
        window.onload = function() {
            addResult('ğŸ“‹ æµ‹è¯•é¡µé¢å·²åŠ è½½');
            testFunnelBuilder();
        };
    </script>
</body>
</html>